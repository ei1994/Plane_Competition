# Plane_Competition
* [中科院航天星图杯比赛官网](http://sw.chreos.org/Home)
* ["航天星图杯”高分软件大赛获奖名单](http://eece.ucas.ac.cn/index.php/zh-cn/2014-06-13-06-44-38/1401-2017-09-14-01-14-10)
* 参赛算法是在[pjreddie/darknet](https://github.com/pjreddie/darknet)代码的基础上进行改进调试。 改进方面主要是根据比赛数据的特性，集中在对图像数据进行预处理及网络预测结果的后处理上。  
## 1、比赛总结
**时间：** 2017.06 — 2017.09
* （1）**训练集的制作、数据预处理：** 组委会提供的数据集（10张高分辨率可见光图片，尺寸在5000* 5000左右），其中的飞机**目标小且分布稀疏** 。因此将数据集图片切分为**1000* 1000的图像块** ，只取包含飞机目标的图像块，利用标图软件labelImg，人工标注得到图像中飞机目标对应的类别、坐标位置等信息数据，并将其制作成voc格式的训练数据集。由于训练数据少且目标分别稀疏，所以加入了**数据扩充处理** ：左右、上下翻转、旋转角度、色度亮度变化等。  
* （2）**网络训练：** 基础网络选择YOLOv2的darknet19（19卷积 + 5池化层），输入图像尺寸改为**992 * 992** ，输出网格改为**19 * 19大小，以增加细粒度** ，适应小目标的检测，平方误差损失，batchsize是32，优化器选择SGD，学习率0.001，anchor box是通过**K-means聚类** 得到5个（长宽比接近1）。
* （3）**测试数据处理：** 测试时是将输入图像（如大小为10000 * 10000）切块，**具体方法** ：判断图片尺寸，若不超过1500 * 1500，则直接将此图片作为网络输入；若超过，则是通过将原图宽高除以1000，向上取整得到分块的个数，用宽高除以分块个数得到每块的宽高值进行切分，得到图像块（大小接近1000 * 1000，与训练数据大小相符）。   
将切块输入网络，预测每个切块中飞机目标的类别、中心点相对坐标、宽和高，之后将目标中心点的预测相对坐标**映射回原图** 的绝对坐标，并写入xml文件。  
* （4）**预测结果后处理、非极大值抑制：** **被网络检测出来的切分成两半的飞机目标** 通过非极大值抑制方法找到目标框位置，将长宽比调整为1，即将分割为两部分的目标框合成一个，作为最终的检测框。这在一定程度上提升了目标检测的准确率。   
* （5）**基本流程图：** 
![算法展示](/images/软件算法说明.PNG "飞机识别")
## 2、比赛排名：
![航天星图杯优秀奖](/images/高分软件大赛优秀奖.jpg "航天星图杯")

